<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multiplier Game</title>
    <style>
        /* Reset styles */
        html, body, div, span, applet, object, iframe,
        h1, h2, h3, h4, h5, h6, p, blockquote, pre,
        a, abbr, acronym, address, big, cite, code,
        del, dfn, em, img, ins, kbd, q, s, samp,
        small, strike, strong, sub, sup, tt, var,
        b, u, i, center,
        dl, dt, dd, ol, ul, li,
        fieldset, form, label, legend,
        table, caption, tbody, tfoot, thead, tr, th, td,
        article, aside, canvas, details, embed, 
        figure, figcaption, footer, header, hgroup, 
        menu, nav, output, ruby, section, summary,
        time, mark, audio, video {
            margin: 0;
            padding: 0;
            border: 0;
            font-size: 100%;
            font: inherit;
            vertical-align: baseline;
        }

        /* General layout */
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #f1f1f1;
        }
        .game-container {
            max-width: 600px;
            width: 100%;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
        }
        .game-columns {
            display: flex;
            justify-content: space-between;
            height: 360px;
        }

        /* Example block styles */
        .example-container {
            display: flex;
            flex-direction: column;
        }
        .example {
            font-size: 24px;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .answer-input {
            font-size: 20px;
            width: 100px;
            padding: 0;
            margin: 0;
        }
        .answer-input:disabled {
            background-color: lightgray;
        }

        /* Cube block styles */
        .cubes-container {
            display: grid;
            grid-template-columns: repeat(4, auto);
            justify-items: end;
            gap: 8px;
        }
        .cube {
            width: 29px;
            height: 29px;
            background-color: #4CAF50;
            opacity: 0;
            animation: none;
        }

        /* Animation for falling cubes */
        @keyframes fall {
            0% {
                transform: translateY(100px);
                opacity: 0;
            }
            100% {
                transform: translateY(0);
                opacity: 1;
            }
        }

        /* Button styles */
        button.submit-btn {
            margin: 0 auto;
            padding: 10px;
            font-size: 16px;
            margin-top: 20px;
            background-color: #A9A9A9;
            color: white;
            border: none;
            cursor: pointer;
        }
        button.submit-btn.right {
            background-color: #228B22;
        }
        button.submit-btn.enabled {
            background-color: #228B22;
            cursor: pointer;
        }
        button.submit-btn.wrong {
            background-color: #FA8072;
        }
        button.submit-btn:hover {
            background-color: #AFEEEE;
        }
        button.submit-btn:disabled {
            background-color: #A9A9A9;
            cursor: not-allowed;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="game-columns">
            <div class="column left-column">
                <div class="example-container"></div>
            </div>
    
            <div class="column right-column">
                <div class="cubes-container"></div>
            </div>
        </div>
    
        <button id="submit-btn" class="submit-btn">Done</button>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const N = 4;
            const examples = Array.from({ length: 10 }, (_, i) => ({ question: `${N} Ã— ${i + 1}`, answer: N * (i + 1) }));
            let currentExampleIndex = 0;

            const submitBtn = document.getElementById("submit-btn");
            const cubesContainer = document.querySelector(".cubes-container");
            const exampleContainer = document.querySelector(".example-container");

            function addCubes(answer) {
                const cubesToAdd = answer - cubesContainer.children.length;
                if (cubesToAdd > 0) {
                    const fragment = document.createDocumentFragment();
                    for (let i = 0; i < cubesToAdd; i++) {
                        const cube = document.createElement("div");
                        cube.classList.add("cube");
                        fragment.appendChild(cube);
                    }
                    cubesContainer.appendChild(fragment);
                    setTimeout(() => {
                        const cubes = cubesContainer.querySelectorAll('.cube');
                        cubes.forEach((cube) => {
                            cube.style.animation = `fall 0.5s ease-out 0s forwards`;
                        });
                    }, 100);
                }
            }
        
            function nextExample() {
                if (currentExampleIndex < examples.length) {
                    const example = examples[currentExampleIndex];
                    const newExampleDiv = document.createElement("div");
                    newExampleDiv.classList.add("example");

                    const exampleText = document.createElement("div");
                    exampleText.classList.add("example-text");
                    exampleText.textContent = example.question + " = ";
                
                    const newInputField = document.createElement("input");
                    newInputField.type = "number";
                    newInputField.classList.add("answer-input");
                    newInputField.setAttribute("data-answer", example.answer);
                    newExampleDiv.append(exampleText, newInputField);
                
                    exampleContainer.appendChild(newExampleDiv);
                
                    newExampleDiv.style.opacity = 0;
                    setTimeout(() => {
                        newExampleDiv.style.opacity = 1;
                        newExampleDiv.style.transition = 'opacity 0.5s ease-in';
                    }, 0);
                
                    newInputField.addEventListener("input", () => {
                        submitBtn.disabled = !newInputField.value.trim();
                    });
                
                    addCubes(example.answer);
                    newInputField.focus();
                    currentExampleIndex++;
                }
            }
        
            function handleAnswerSubmit() {
                const currentInputField = document.querySelector(".answer-input");
                const correctAnswer = parseInt(currentInputField.getAttribute("data-answer"));
                const userAnswer = parseInt(currentInputField.value);
            
                if (userAnswer === correctAnswer) {
                    submitBtn.classList.remove("wrong");
                    submitBtn.classList.add("right");
                    currentInputField.replaceWith(document.createTextNode(correctAnswer));
                
                    setTimeout(() => {
                        addCubes(correctAnswer);
                        nextExample();
                        submitBtn.classList.remove("right");
                        submitBtn.disabled = true;
                    }, 500);
                } else {
                    submitBtn.classList.add("wrong");
                    currentInputField.style.color = "red";
                
                    setTimeout(() => {
                        submitBtn.classList.remove("wrong");
                        currentInputField.style.color = "black";
                    }, 1000);
                }
            }
        
            function initializeGame() {
                nextExample();
                submitBtn.disabled = true;
            }
        
            submitBtn.addEventListener("click", handleAnswerSubmit);
            document.addEventListener('keydown', (event) => {
                if (event.key === 'Enter' && !submitBtn.disabled) {
                    handleAnswerSubmit();
                }
            });
        
            submitBtn.addEventListener('mouseover', () => {
                if (!submitBtn.disabled) submitBtn.style.backgroundColor = '#AFEEEE';
            });
        
            submitBtn.addEventListener('mouseout', () => {
                if (!submitBtn.disabled) submitBtn.style.backgroundColor = submitBtn.classList.contains("right") ? "#228B22" : "#A9A9A9";
            });
        
            initializeGame();
        });
    </script>
</body>
</html>